{"remainingRequest":"/home/amos/Bureau/VSDR_site/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/amos/Bureau/VSDR_site/src/components/MapSensor.vue?vue&type=style&index=0&id=4d385d36&scoped=true&lang=css&","dependencies":[{"path":"/home/amos/Bureau/VSDR_site/src/components/MapSensor.vue","mtime":1617204143000},{"path":"/home/amos/Bureau/VSDR_site/node_modules/css-loader/dist/cjs.js","mtime":1622616466311},{"path":"/home/amos/Bureau/VSDR_site/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1622616466449},{"path":"/home/amos/Bureau/VSDR_site/node_modules/postcss-loader/src/index.js","mtime":1622616466430},{"path":"/home/amos/Bureau/VSDR_site/node_modules/cache-loader/dist/cjs.js","mtime":1622616452493},{"path":"/home/amos/Bureau/VSDR_site/node_modules/vue-loader/lib/index.js","mtime":1622616466449}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCkBpbXBvcnQgIi4uLy4uL25vZGVfbW9kdWxlcy9sZWFmbGV0L2Rpc3QvbGVhZmxldC5jc3MiOwoK"},{"version":3,"sources":["MapSensor.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8UA","file":"MapSensor.vue","sourceRoot":"src/components","sourcesContent":["<template>\n<div>\n  <b-overlay rounded=\"sm\" :opacity=\"0.75\" variant='light'>\n\n    <b-card>\n      <h4 class=\"card-title\">Emplacements mesurés &nbsp; &nbsp;\n        <!-- Nice CSS animation for information circle -->\n        <i\n          v-bind:class=\"[hovered ? 'fa fa-info-circle text-muted animate__animated animate__rubberBand' : 'fa fa-info-circle text-muted']\"\n          v-on:mouseover=\"hovered=true\" v-on:mouseout=\"hovered=false\" @click=\"info = !info\">\n        </i>\n      </h4>\n\n      <br>\n      <l-map\n        target=\"themap\"\n        style=\"min-height: 500px; width: 100%\"\n        :zoom=\"zoom\"\n        :center=\"center\"\n        @update:zoom=\"zoomUpdated\"\n        @update:center=\"centerUpdated\"\n        @update:bounds=\"boundsUpdated\"\n        @click=\"printPosition\"\n\n        class=\"leaflet-control-layers-list\">\n        <l-control-layers ref=\"control\"/>\n        <l-tile-layer\n          v-for=\"tileProvider in tileProviders\"\n          :key=\"tileProvider.name\"\n          :name=\"tileProvider.name\"\n          :visible=\"tileProvider.visible\"\n          :url=\"tileProvider.url\"\n          :attribution=\"tileProvider.attribution\"\n          layer-type=\"base\"/>\n        <l-layer-group\n          layer-type=\"overlay\"\n          name=\"Capteurs\"\n          :visible=\"true\">\n          <div v-for=\"(sensor,index) in sensors.filter( s=>s.type === 'hei')\">\n            <div v-if=\" sensor.frostRiskValue == -1\">\n              <l-marker :lat-lng=\"[sensor.lat+0.0001,sensor.lng+0.0001]\" :key=\"index + 100\" :icon=\"deviceIcon\">\n                <l-popup>\n                  <div>\n                    <div>\n                      <h5>Risque de givre : nul</h5>\n                    </div>\n                  </div>\n                </l-popup>\n              </l-marker>\n            </div>\n            <div v-else-if=\" sensor.frostRiskValue == 0\">\n              <l-marker :lat-lng=\"[sensor.lat+0.0001,sensor.lng+0.0001]\" :key=\"index + 100\"\n                        :icon=\"deviceIconLightFrost\">\n                <l-popup>\n                  <div>\n                    <div>\n                      <h5>Risque de givre : modéré</h5>\n                    </div>\n                  </div>\n                </l-popup>\n              </l-marker>\n            </div>\n            <div v-else-if=\"sensor.frostRiskValue == 1\">\n              <l-marker :lat-lng=\"[sensor.lat+0.0001,sensor.lng+0.0001]\" :key=\"index + 100\"\n                        :icon=\"deviceIconFrost\">\n                <l-popup>\n                  <div>\n                    <div>\n                      <h5>Risque de givre : élevé</h5>\n                    </div>\n                  </div>\n                </l-popup>\n              </l-marker>\n            </div>\n      <!--      <div v-else-if=\"sensor.snow-sensor.snowOffset[0] <= 50 && sensor.frostRiskValue == 0\">\n              <l-marker :lat-lng=\"[sensor.lat+0.0001,sensor.lng+0.0001]\" :key=\"index + 100\"\n                        :icon=\"deviceIconLightFrost\">\n                <l-popup>\n                  <div>\n                    <div>\n                      <h5>Hauteur de neige : {{ ((sensor.snow-sensor.snowOffset[0])/10).toFixed(0)}}cm</h5>\n                      <h5>Risque de givre : modéré</h5>\n                    </div>\n                  </div>\n                </l-popup>\n              </l-marker>\n            </div>\n            <div v-else-if=\"sensor.snow-sensor.snowOffset[0] <= 50 && sensor.frostRiskValue == 1\">\n              <l-marker :lat-lng=\"[sensor.lat+0.0001,sensor.lng+0.0001]\" :key=\"index + 100\" :icon=\"deviceIconFrost\">\n                <l-popup>\n                  <div>\n                    <div>\n                      <h5>Hauteur de neige : {{ ((sensor.snow-sensor.snowOffset[0])/10).toFixed(0)}}cm</h5>\n                      <h5>Risque de givre : élevé</h5>\n                    </div>\n                  </div>\n                </l-popup>\n              </l-marker>\n            </div>\n            <div v-else>\n              <l-marker :lat-lng=\"[sensor.lat+0.0001,sensor.lng+0.0001]\" :key=\"index + 100\" :icon=\"deviceIcon\">\n                <l-popup>\n                  <div>\n                    <div>\n                      <h5>Lieu : {{sensor.realName}}</h5>\n                      <h5>Valeur lue le : {{new Date(sensor.when).toLocaleString('fr-CH')}}</h5>\n                    </div>\n                  </div>\n                </l-popup>\n              </l-marker>\n            </div>-->\n          </div>\n<!--special case for prodesavioz where there is no snow lovel sensor-->\n          <div v-for=\"(sensor,index) in sensors.filter( s=>s.type === 'decentlab')\">\n            <div v-if=\"sensor.frostRiskValue == 1 && sensor.where==='prodesavioz'\">\n              <l-marker :lat-lng=\"[sensor.lat+0.0001,sensor.lng+0.0001]\" :key=\"index + 100\"\n                        :icon=\"deviceIconFrost\">\n                <l-popup>\n                  <div>\n                    <div>\n                      <h5>Hauteur de neige : {{ ((sensor.snow-sensor.snowOffset[0])/10).toFixed(0)}}cm</h5>\n                      <h5>Risque de givre : élevé</h5>\n                    </div>\n                  </div>\n                </l-popup>\n              </l-marker>\n            </div>\n            <div v-if=\"sensor.frostRiskValue == 0 && sensor.where==='prodesavioz'\">\n              <l-marker :lat-lng=\"[sensor.lat+0.0001,sensor.lng+0.0001]\" :key=\"index + 100\"\n                        :icon=\"deviceIconLightFrost\">\n                <l-popup>\n                  <div>\n                    <div>\n                      <h5>Hauteur de neige : {{ ((sensor.snow-sensor.snowOffset[0])/10).toFixed(0)}}cm</h5>\n                      <h5>Risque de givre : élevé</h5>\n                    </div>\n                  </div>\n                </l-popup>\n              </l-marker>\n            </div>\n            <div v-if=\"sensor.frostRiskValue == -1 && sensor.where==='prodesavioz'\">\n              <l-marker :lat-lng=\"[sensor.lat+0.0001,sensor.lng+0.0001]\" :key=\"index + 100\" :icon=\"deviceIcon\">\n                <l-popup>\n                  <div>\n                    <div>\n                      <h5>Lieu : {{sensor.realName}}</h5>\n                      <h5>Valeur lue le : {{new Date(sensor.when).toLocaleString('fr-CH')}}</h5>\n                    </div>\n                  </div>\n                </l-popup>\n              </l-marker>\n            </div>\n          </div>\n\n        </l-layer-group>\n      </l-map>\n\n      <!-- Additional map information-->\n      <div v-if=\"info\" class=\"animate__animated animate__fadeInDown\" transition=\"zoomInOut\">\n        <b-container>\n          <b-row cols=\"1\" cols-sm=\"1\" cols-md=\"2\" cols-lg=\"2\">\n            <b-col class=\"py-1\">\n              <b-media>\n                <template #aside>\n                  <b-img src=\"static/img/gps.png\" align=\"center\" width=\"32\" height=\"32\"></b-img>\n                </template>\n                Emplacement des capteurs\n              </b-media>\n            </b-col>\n            <b-col class=\"py-1\">\n              <b-media>\n                <template #aside>\n                  <b-img src=\"static/img/warningFrost.png\" align=\"center\" width=\"32\" height=\"32\"></b-img>\n                </template>\n                Risque de givre élevé\n              </b-media>\n            </b-col>\n            <b-col class=\"py-1\">\n              <b-media>\n                <template #aside>\n                  <b-img src=\"static/img/warningLightFrost.png\" align=\"center\" width=\"32\" height=\"32\"></b-img>\n                </template>\n                Risque de givre modéré\n              </b-media>\n            </b-col>\n            <b-col class=\"py-1\">\n  <!--            <b-media>\n                <template #aside>\n                  <b-img src=\"static/img/snowwarning.png\" align=\"center\" width=\"32\" height=\"32\"></b-img>\n                </template>\n                Présence de neige\n              </b-media><-->\n            </b-col>\n          </b-row>\n        </b-container>\n      </div>\n    </b-card>\n  </b-overlay>\n</div>\n</template>\n\n<script>\nimport {Card, StatsCard, Table as LTable} from \"@/components/index\";\nimport {LControlLayers, LLayerGroup, LMap, LMarker, LPopup, LTileLayer} from \"vue2-leaflet\";\nimport L from \"leaflet\";\n\nexport default {\n  name: \"Map\",\n  components: {\n    Card, StatsCard, LMap, LTileLayer, LMarker, LPopup, LControlLayers, LLayerGroup, LTable\n  },\n  props:{\n      sensors: '',\n      center: '',\n\n  },\n  data() {\n    return {\n      hovered: false,\n      info: false,\n      tileProviders: [\n        {\n          name: 'OpenTopoMap',\n          visible: false,\n          url: 'https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png',\n          attribution:\n            '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a>, <a href=\"http://viewfinderpanoramas.org\">SRTM</a> | &copy; <a href=\"https://opentopomap.org\">OpenTopoMap</a> (<a href=\"https://creativecommons.org/licenses/by-sa/3.0/\">CC-BY-SA</a>)',\n        },\n        {\n          name: 'OSM',\n          visible: true,\n          attribution:\n            '&copy; <a target=\"_blank\" href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors',\n          url: 'https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png',\n        },\n        {\n          name: 'Stadia',\n          visible: false,\n          url: 'https://tiles.stadiamaps.com/tiles/alidade_smooth/{z}/{x}/{y}{r}.png?api_key=d4378e12-a0a7-4ae4-a2ff-508d8a238448',\n          attribution:\n            '&copy; <a href=\"https://stadiamaps.com/\">Stadia Maps</a>, &copy; <a href=\"https://openmaptiles.org\">OpenMapTiles</a>, &copy; <a href=\"http://openstreetmap.org\">OpenStreetMap</a> contributors',\n        },\n        {\n          name: 'OpenStreetMap',\n          visible: true,\n          attribution:\n            '&copy; <a target=\"_blank\" href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors',\n          url: 'https://tile.osm.ch/switzerland/{z}/{x}/{y}.png',\n        },\n      ],\n      deviceIconFrost: L.icon({\n        iconUrl: require('../../public/static/img/warningFrost.png'),\n        iconSize: [32, 32],\n        iconAnchor: [16, 32],\n        popupAnchor: [0, -20]\n      }),\n      deviceIconLightFrost: L.icon({\n        iconUrl: require('../../public/static/img/warningLightFrost.png'),\n        iconSize: [32, 32],\n        iconAnchor: [16, 32],\n        popupAnchor: [0, -20]\n      }),\n      deviceIconSnow: L.icon({\n        iconUrl: require('../../public/static/img/snowwarning.png'),\n        iconSize: [32, 32],\n        iconAnchor: [16, 32],\n        popupAnchor: [0, -20]\n      }),\n      deviceIconFrostAndSnow: L.icon({\n        iconUrl: require('../assets/frostAndSnowRisk.png'),\n        iconSize: [64, 32],\n        iconAnchor: [16, 32],\n        popupAnchor: [0, -20]\n      }),\n      deviceIconLightFrostAndSnow: L.icon({\n        iconUrl: require('../assets/lightFrostAndSnowRisk.png'),\n        iconSize: [64, 32],\n        iconAnchor: [16, 32],\n        popupAnchor: [0, -20]\n      }),\n      deviceIcon: L.icon({\n        iconUrl: require('../../public/static/img/gps.png'),\n        iconSize: [32, 32],\n        iconAnchor: [16, 32],\n        popupAnchor: [0, -20]\n      }),\n\n      series_chart: [{                                                        //serie of the 3 sensors, used just in this page\n        data: [],\n      }],\n\n      arrow: require('../assets/svg/left_arrow.svg'),\n      showStatus: false,                                                     // right button to show antenna status\n      timer: null,\n      timerIsRunning: false,\n      seconds: 30,\n\n      // Leaflet\n      maxZoom: 10,\n      zoom: 12.5, //13.5\n      bounds: null,\n\n      markers: [\n        [46.096715752047594, 7.214045226573945],\n        [46.093561170654304, 7.212307155132295],\n      ],\n    }\n\n\n  },\n  mounted() {\n\n    },\n  methods:{\n    zoomUpdated(zoom) {\n      this.zoom = zoom;\n    },\n    centerUpdated(center) {\n  //    this.center = center;\n    },\n    boundsUpdated(bounds) {\n      this.bounds = bounds;\n    },\n    /**\n     * print position clicked with the mouse\n     */\n    printPosition(event) {\n      console.log(event.latlng);\n    },\n  }\n}\n</script>\n\n<style scoped>\n@import \"../../node_modules/leaflet/dist/leaflet.css\";\n\n</style>\n"]}]}