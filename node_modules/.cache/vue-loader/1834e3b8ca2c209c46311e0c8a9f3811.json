{"remainingRequest":"/home/amos/Bureau/VSDR_site/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/amos/Bureau/VSDR_site/src/pages/Dashboard/Admin.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/home/amos/Bureau/VSDR_site/src/pages/Dashboard/Admin.vue","mtime":1617204143000},{"path":"/home/amos/Bureau/VSDR_site/node_modules/css-loader/dist/cjs.js","mtime":1622616466311},{"path":"/home/amos/Bureau/VSDR_site/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1622616466449},{"path":"/home/amos/Bureau/VSDR_site/node_modules/postcss-loader/src/index.js","mtime":1622616466430},{"path":"/home/amos/Bureau/VSDR_site/node_modules/cache-loader/dist/cjs.js","mtime":1622616452493},{"path":"/home/amos/Bureau/VSDR_site/node_modules/vue-loader/lib/index.js","mtime":1622616466449}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoubG9naW57CiAgdGV4dC1hbGlnbjpjZW50ZXI7CiAgd2lkdGg6IDUwJTsKICBtYXJnaW46IGF1dG87Cn0KLmFkbWluewoKfQoK"},{"version":3,"sources":["Admin.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2PA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"Admin.vue","sourceRoot":"src/pages/Dashboard","sourcesContent":["<template>\n  <div>\n    <h2>Liste des collaborateurs à alerter</h2>\n    <b-card title=\"Ajouter ou supprimer un collaborateur dans la liste\">\n      <l-radio v-model=\"actionCollaboratorList\" label=\"addCollab\" >Ajouter</l-radio>\n      <l-radio v-model=\"actionCollaboratorList\" label=\"deleteCollab\" >Supprimer</l-radio>\n\n        <div class=\"row\" v-if=\"actionCollaboratorList == 'addCollab' || actionCollaboratorList == 'deleteCollab'\">\n          <div class=\"col-lg-4\" align=\"center\">\n              <label for=\"name\">Nom</label>\n              <br>\n              <input id=\"name\" v-model=\"name\" type=\"text\" name=\"name\"></input>\n          </div>\n          <div class=\"col-lg-4\" align=\"center\">\n              <label for=\"firstName\">Prénom</label>\n               <br>\n              <input id=\"firstName\" v-model=\"firstName\" type=\"text\" name=\"firstName\"></input>\n          </div>\n          <div class=\"col-lg-4\" align=\"center\">\n              <label for=\"number\">Numéro de téléphone</label>\n               <br>\n              <input id=\"number\" v-model=\"number\" type=\"text\" name=\"number\" ></input>\n          </div>\n        </div>\n        <br>\n        <div align=\"center\" v-if=\"actionCollaboratorList == 'addCollab' \">\n          <l-button type=\"info\" @click=\"addToJsonCollaborator()\" > Enregistrer </l-button>\n          <p v-if=\"saveErrorMessage != null\"> {{this.saveErrorMessage}}</p>\n        </div>\n      <div align=\"center\" v-if=\"actionCollaboratorList == 'deleteCollab' \">\n        <l-button type=\"info\" @click=\"deleteFromJsonCollaborator()\" > Supprimer </l-button>\n        <p v-if=\"deleteErrorMessage != null\"> {{this.saveErrorMessage}}</p>\n      </div >\n      <div>\n        <p align=\"center\" style=\"color: red\">{{this.errors[3]}}</p>\n      </div>\n\n      <div>\n        <h3>Liste des collaborateurs</h3>\n        <div class=\"col-lg-5\" align=\"left\">\n        <table class=\"table table-striped\" >\n          <thead class=\"thead-light\">\n            <tr>\n              <th scope=\"col\"> ID </th>\n              <th scope=\"col\"> Nom </th>\n              <th scope=\"col\"> Prénom </th>\n              <th scope=\"col\"> Numéro </th>\n            </tr>\n          </thead>\n          <tbody>\n          <tr v-for=\"collaborator in collaboratorList.filter(s => s.project === this.$PROJECT )\">\n            <th scope=\"row\">{{ collaborator.ID }}</th>\n            <td> {{collaborator.name}}</td>\n            <td> {{collaborator.firstName}}</td>\n            <td> {{collaborator.number}}</td>\n          </tr>\n          </tbody>\n        </table>\n\n        </div>\n      </div>\n    </b-card>\n\n\n    <h2>Capteurs de hauteur de neige</h2>\n    <b-card title=\"Modifier la hauteur d'installation\">\n      <div class=\"row\">\n        <div class=\"col-lg-6\" align=\"center\" >\n          <h4>Emplacement</h4>\n        </div>\n        <div class=\"col-lg-6\" align=\"center\" >\n          <h4>Hauteur d'installation [mm]</h4>\n        </div>\n      </div>\n      <div class=\"row\" v-for=\"project in this.snowOffsetList.filter(s => s.project === this.$PROJECT) \">\n        <div class=\"col-lg-6\" align=\"center\" >\n          <p style=\"color: darkgrey\" >{{project.realName}}</p>\n        </div>\n        <div class=\"col-lg-6\" align=\"center\" >\n          <input :id=\"'snowOffset-'+project.location\" type=\"number\" name=\"snowOffset\" :value=\"project.offset\"></input>\n        </div>\n\n      </div>\n      <div align=\"center\">\n        <l-button type=\"info\" @click=\"updateSnowOffset(proj)\"> Valider </l-button>\n      </div>\n    </b-card>\n  </div>\n\n</template>\n\n<script>\n\nimport LCheckbox from \"@/components/Inputs/Checkbox\";\nimport LRadio from \"@/components/Inputs/Radio\";\nimport axios from \"axios\"\n\nexport default {\n  components: {LRadio, LCheckbox},\n\n  data () {\n    return {\n      proj : location.hostname.split('.')[0],\n      errors: [],\n\n      collaboratorList : [],\n      ID: '',\n      name : '',\n      firstName: '',\n      number : '',\n      actionCollaboratorList : false,\n      saveErrorMessage : null,\n      deleteErrorMessage :null,\n      selectedFile: \"\",\n\n      snowOffsetList : [],\n      snowOffset : '',\n\n    }\n\n  },\n  created() {\n\n    /**\n     * download file from server\n     */\n    axios.get(this.$SERVERURL + 'collaboratorList')\n      .then(res => {\n\n        this.collaboratorList = res.data;\n        console.log(this.collaboratorList)\n      })\n      .catch(error => {\n        console.log(error)\n        // Manage errors if found any\n      })\n\n    axios.get(this.$SERVERURL + 'snowOffset')\n      .then(res => {\n        this.snowOffsetList = res.data;\n        //console.log(this.snowOffsetList)\n      })\n      .catch(error => {\n        console.log(error)\n        // Manage errors if found any\n      })\n\n  },\n  methods: {\n   /**\n     * Add a collaborator to the Json document server side\n     */\n    addToJsonCollaborator : function (){\n      this.errors = [];\n      if(this.name === '' || this.firstName === '' || this.number === ''){\n        console.log(\"Informations du collaborateur incomplètes\")\n        this.errors[3] = \"Informations du collaborateur incomplètes\";\n      }else{\n        this.collaboratorList.push({ID : this.collaboratorList.length, name : this.name, firstName : this.firstName, number : this.number, project : this.$PROJECT})\n        //add collaborator to json\n        const formData = new FormData();\n        formData.append(\"file\", new Blob([\n          JSON.stringify(this.collaboratorList),\n\n        ], {type : 'application/json'}), \"collabList.json\");  // appending file\n        // sending file to the backend\n        axios.post('https://snow-server.watermon.ch:443/collaboratorList', formData)\n          .then(res => {\n            //console.log(\"write from webstorm\");\n            console.log(res);\n          })\n          .catch(err => {\n            console.log(err);\n          });\n      }\n    },\n\n\n    /**\n     *\n     */\n    deleteFromJsonCollaborator : function(){\n      this.collaboratorList.forEach(element => {\n          if (element.ID === this.ID) {\n            this.collaboratorList.splice(this.collaboratorList.indexOf(element), 1)\n          } else if (element.name === this.name) {\n            if (element.firstName === this.firstName) {\n              this.collaboratorList.splice(this.collaboratorList.indexOf(element), 1)\n            }\n          }\n        }\n      )\n      //rewrite on the document\n      const formData = new FormData();\n      formData.append(\"file\", new Blob([\n        JSON.stringify(this.collaboratorList),\n\n      ], {type : 'application/json'}), \"collabList.json\");  // appending file\n      // sending file to the backend\n      axios.post(this.$SERVERURL + 'collaboratorList', formData)\n        .then(res => {\n          console.log(res);\n        })\n        .catch(err => {\n          console.log(err)\n        });\n\n    },\n\n    updateSnowOffset :function (proj){\n      for(var i = 0 ; i<this.snowOffsetList.length; i++){\n        if(this.snowOffsetList[i].project === proj){\n          this.snowOffsetList[i].offset = document.getElementById('snowOffset-'+this.snowOffsetList[i].location).value\n          console.log(this.snowOffsetList[i].offset)\n        }\n      }\n     // console.log(this.snowOffsetList)\n\n      //add collaborator to json\n      const formData = new FormData();\n      formData.append(\"file\", new Blob([\n        JSON.stringify(this.snowOffsetList),\n\n      ], {type : 'application/json'}), \"snowOffsetList.json\");  // appending file\n      // sending file to the backend\n    //  console.log(this.snowOffsetList)\n      axios.post(this.$SERVERURL + 'snowOffset', formData)\n        .then(res => {\n         // console.log(res);\n        })\n        .catch(err => {\n          console.log(err);\n        });\n    },\n\n\n    toto : function (){\n      axios.get(this.$SERVERURL + 'sensorList')\n        .then(res => {\n          console.log(res.data);\n        })\n        .catch(error => {\n          console.log(error)\n        })\n\n\n    }\n  }\n}\n</script>\n<style>\n.login{\n  text-align:center;\n  width: 50%;\n  margin: auto;\n}\n.admin{\n\n}\n\n</style>\n"]}]}