{"remainingRequest":"/home/amos/Bureau/VSDR_site/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/amos/Bureau/VSDR_site/src/components/downloadData.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/amos/Bureau/VSDR_site/src/components/downloadData.vue","mtime":1617204143000},{"path":"/home/amos/Bureau/VSDR_site/node_modules/cache-loader/dist/cjs.js","mtime":1622616452493},{"path":"/home/amos/Bureau/VSDR_site/node_modules/babel-loader/lib/index.js","mtime":1622616452469},{"path":"/home/amos/Bureau/VSDR_site/node_modules/cache-loader/dist/cjs.js","mtime":1622616452493},{"path":"/home/amos/Bureau/VSDR_site/node_modules/vue-loader/lib/index.js","mtime":1622616466449}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBMQ2hlY2tib3ggZnJvbSAiQC9jb21wb25lbnRzL0lucHV0cy9DaGVja2JveCI7CmltcG9ydCBkb3dubG9hZENzdiBmcm9tICJ2dWUtanNvbi1jc3YiOwppbXBvcnQge0NvbGxhcHNlLCBDb2xsYXBzZUl0ZW0sIE9wdGlvbiwgU2VsZWN0fSBmcm9tICJlbGVtZW50LXVpIjsKaW1wb3J0IHtGb3JtR3JvdXBJbnB1dCBhcyBGZ0lucHV0fSBmcm9tICJAL2NvbXBvbmVudHMvaW5kZXgiOwppbXBvcnQgZGJfcmVxIGZyb20gIkAvY29uc3RhbnRzL2luZmx1eF9yZXF1ZXN0cy5qc29uIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiZG93bmxvYWREYXRhIiwKICBjb21wb25lbnRzOiB7TENoZWNrYm94fSwKICBjb21wb25lbnQ6IHsKICAgIGRvd25sb2FkQ3N2LAogICAgW0NvbGxhcHNlLm5hbWVdOiBDb2xsYXBzZSwKICAgIFtDb2xsYXBzZUl0ZW0ubmFtZV06IENvbGxhcHNlSXRlbSwKICAgIExDaGVja2JveCwgRmdJbnB1dCwKICAgIFtTZWxlY3QubmFtZV06IFNlbGVjdCwKICAgIFtPcHRpb24ubmFtZV06IE9wdGlvbgogIH0sCiAgcHJvcHMgOiB7CiAgICBsb2NhdGlvbiA6IEFycmF5CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKCgogICAgICBzZW5zb3JTdGF0ZTogJycsICAgICAgICAgICAgICAgICAvL3N0YXRlIG9mIHRoZSBzZW5zb3JzCiAgICAgIHNlbnNvcnM6IFtdLCAgICAgICAgICAgICAgICAgICAgIC8vYXJyYXkgY29udGFpbiBhbGwgc2Vuc29ycyBiYXNpY3MgZGF0YQogICAgICBqc29uX2RhdGE6IFtdLCAgICAgICAgICAgICAgICAgICAvL2pzb24gYXJyYXkgZm9yIGV4cG9ydCBhbmQgZG93bmxvYWQgcGFydAoKICAgICAgLy8gRG93bmxvYWQgYWxsIGRhdGEgZGVjZW50bGFiCiAgICAgIHNlbnNvcl9kbDogZmFsc2UsCiAgICAgIGRvd25sb2FkX2hlYWRfdGVtcF9kbDogZmFsc2UsICAgICAgICAgICAgICAgICAgLy9jaGVja2JveCB2YWx1ZXMKICAgICAgZG93bmxvYWRfdGFyZ2V0X3RlbXBfZGw6IGZhbHNlLCAgICAgICAgICAgICAgICAvLwogICAgICBkb3dubG9hZF9iYXR0ZXJ5X2RsOiBmYWxzZSwgICAgICAgICAgICAgICAgICAgIC8vCiAgICAgIGRvd25sb2FkX1JTU0lfZGw6IGZhbHNlLCAgICAgICAgICAgICAgICAgICAgICAgLy8KICAgICAgZG93bmxvYWRfU05SX2RsOiBmYWxzZSwgICAgICAgICAgICAgICAgICAgICAgICAvLwoKICAgICAgLy9Eb3dubG9hZCBhbGwgZGF0YSBoZWkKICAgICAgc2Vuc29yX2hlaTogZmFsc2UsCiAgICAgIGRvd25sb2FkX3Nub3dfaGVpZ2h0X2hlaTogZmFsc2UsICAgICAgICAgICAgICAgICAgLy9jaGVja2JveCB2YWx1ZXMKICAgICAgZG93bmxvYWRfaHVtaWRpdHlfaGVpOiBmYWxzZSwgICAgICAgICAgICAgICAgLy8KICAgICAgZG93bmxvYWRfYmF0dGVyeV9oZWk6IGZhbHNlLCAgICAgICAgICAgICAgICAgICAgLy8KICAgICAgZG93bmxvYWRfUlNTSV9oZWk6IGZhbHNlLCAgICAgICAgICAgICAgICAgICAgICAgLy8KICAgICAgZG93bmxvYWRfU05SX2hlaTogZmFsc2UsICAgICAgICAgICAgICAgICAgICAgICAgLy8KCiAgICAgIGRvd25sb2FkX3RpbWVfdmFsdWU6ICcxMicsICAgICAgICAgICAgICAgICAgLy9pbnB1dCB2YWx1ZQogICAgICBzZWxlY3RzX3RpbWU6IHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9pbnB1dCBzZWxlY3RvcgogICAgICAgIHNpbXBsZTogJ2gnLAogICAgICAgIGRvd25sb2FkX3RpbWVfdW5pdDogWwogICAgICAgICAge3ZhbHVlOiAnaCcsIGxhYmVsOiAnSGV1cmUocyknfSwKICAgICAgICAgIHt2YWx1ZTogJ2QnLCBsYWJlbDogJ0pvdXIocyknfSwKICAgICAgICAgIHt2YWx1ZTogJ3cnLCBsYWJlbDogJ1NlbWFpbmUocyknfSwKICAgICAgICBdCiAgICAgIH0sCiAgICAgIHNlbGVjdHNfbG9jYXRpb246IHsgICAgICAgICAgICAgICAgICAgICAgICAgLy9pbnB1dCBzZWxlY3RvcgogICAgICAgIHNpbXBsZTogIiIsCiAgICAgICAgZG93bmxvYWRfbG9jYXRpb25fdW5pdDogWwogICAgICAgIF0KICAgICAgfSwKCgogICAgfQogIH0sCiAgYmVmb3JlTW91bnQoKSB7CiAgICB0aGlzLnNlbGVjdHNfbG9jYXRpb24uc2ltcGxlID0gdGhpcy5sb2NhdGlvblswXS5sb2NhdGlvbgogICAgLy8gc2V0IHRoZSBzZWxlY3QgY29tcG9uZW50IHdpdGggdGhlIHZhbHVlcyB0YWtlbiBpbiB0aGUganNvbiBmaWxlCiAgICBmb3IodmFyIGkgPSAwIDsgaTwgdGhpcy5sb2NhdGlvbi5sZW5ndGg7aSsrKXsKICAgICAgdGhpcy5zZWxlY3RzX2xvY2F0aW9uLmRvd25sb2FkX2xvY2F0aW9uX3VuaXQucHVzaCgKICAgICAgICB7CiAgICAgICAgICB2YWx1ZSA6IHRoaXMubG9jYXRpb25baV0ubG9jYXRpb24sIGxhYmVsOiB0aGlzLmxvY2F0aW9uW2ldLnJlYWxOYW1lCiAgICAgICAgfSkKICAgIH0KICB9LAoKCiAgbWV0aG9kczogewogICAgbG9hZERhdGE6IGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy5qc29uX2RhdGEgPSBbXTsKICAgICAgdGhpcy5qc29uX2RhdGFETCA9IFtdOwogICAgICB0aGlzLmpzb25fZGF0YUhlaSA9IFtdOwoKICAgICAgbGV0IHF1ZXJ5RGwgPSAnU0VMRUNUICcKICAgICAgbGV0IHF1ZXJ5SGVpID0gJ1NFTEVDVCAnCgogICAgICBsZXQgZmllbGREbCA9IFtdOwogICAgICBsZXQgZmllbGRIZWkgPSBbXTsKICAgICAgaWYgKHRoaXMuZG93bmxvYWRfdGFyZ2V0X3RlbXBfZGwgIT0gZmFsc2UpIHsKICAgICAgICBmaWVsZERsLnB1c2goJ3BheWxvYWRfZmllbGRzX3RlbXBlcmF0dXJlX3RhcmdldF92YWx1ZScpCiAgICAgIH0KICAgICAgaWYgKHRoaXMuZG93bmxvYWRfaGVhZF90ZW1wX2RsICE9IGZhbHNlKSB7CiAgICAgICAgZmllbGREbC5wdXNoKCdwYXlsb2FkX2ZpZWxkc190ZW1wZXJhdHVyZV9oZWFkX3ZhbHVlJykKICAgICAgfQogICAgICBpZiAodGhpcy5kb3dubG9hZF9iYXR0ZXJ5X2RsICE9IGZhbHNlKSB7CiAgICAgICAgZmllbGREbC5wdXNoKGRiX3JlcS5maWVsZF9iYXR0ZXJ5KQogICAgICB9CiAgICAgIGlmICh0aGlzLmRvd25sb2FkX1JTU0lfZGwgIT0gZmFsc2UpIHsKICAgICAgICBmaWVsZERsLnB1c2goZGJfcmVxLmZpZWxkX3Jzc2kpCiAgICAgIH0KICAgICAgaWYgKHRoaXMuZG93bmxvYWRfU05SX2RsICE9IGZhbHNlKSB7CiAgICAgICAgZmllbGREbC5wdXNoKGRiX3JlcS5maWVsZF9zbnIpCiAgICAgIH0KICAgICAgLyoKICAgICAgICBmb3IgbG9vcCB0byBjcmVhdGUgdGhlIHF1ZXJ5IGZpZWxkIHdpdGggdGhlIGNoZWNrYm94IHZhbHVlcwogICAgICAqLwogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZpZWxkRGwubGVuZ3RoOyBpKyspIHsKICAgICAgICBpZiAoaSAhPSBmaWVsZERsLmxlbmd0aCAtIDEpIHsKICAgICAgICAgIHF1ZXJ5RGwgKz0gZmllbGREbFtpXSArICcsICcKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcXVlcnlEbCArPSBmaWVsZERsW2ldCiAgICAgICAgfQogICAgICB9CiAgICAgIHF1ZXJ5RGwgKz0gJyBGUk9NIG1xdHRfY29uc3VtZXIgd2hlcmUgXCJ0b3BpY1wiPVwnaGVzX2F5ZW50LXNub3cvZGV2aWNlcy9kZWNlbnRsYWInICsgJy0nICsgdGhpcy5zZWxlY3RzX2xvY2F0aW9uLnNpbXBsZSArICcvdXBcJycgKwogICAgICAgICcgQU5EIHRpbWU+bm93KCktJyArIHRoaXMuZG93bmxvYWRfdGltZV92YWx1ZSArIHRoaXMuc2VsZWN0c190aW1lLnNpbXBsZQoKICAgICAgaWYgKHRoaXMuZG93bmxvYWRfc25vd19oZWlnaHRfaGVpICE9IGZhbHNlKSB7CiAgICAgICAgZmllbGRIZWkucHVzaCgncGF5bG9hZF9maWVsZHNfV2F0ZXJIZWlnaHRNbScpCiAgICAgIH0KICAgICAgaWYgKHRoaXMuZG93bmxvYWRfaHVtaWRpdHlfaGVpICE9IGZhbHNlKSB7CiAgICAgICAgZmllbGRIZWkucHVzaCgncGF5bG9hZF9maWVsZHNfSHVtaWRpdHlTSFQzMCcpCiAgICAgIH0KICAgICAgaWYgKHRoaXMuZG93bmxvYWRfYmF0dGVyeV9oZWkgIT0gZmFsc2UpIHsKICAgICAgICBmaWVsZEhlaS5wdXNoKCJwYXlsb2FkX2ZpZWxkc19CYXR0ZXJ5ViIpCiAgICAgIH0KICAgICAgaWYgKHRoaXMuZG93bmxvYWRfUlNTSV9oZWkgIT0gZmFsc2UpIHsKICAgICAgICBmaWVsZEhlaS5wdXNoKGRiX3JlcS5maWVsZF9yc3NpKQogICAgICB9CiAgICAgIGlmICh0aGlzLmRvd25sb2FkX1NOUl9oZWkgIT0gZmFsc2UpIHsKICAgICAgICBmaWVsZEhlaS5wdXNoKGRiX3JlcS5maWVsZF9zbnIpCiAgICAgIH0KICAgICAgLyoKICAgICAgZm9yIGxvb3AgdG8gY3JlYXRlIHRoZSBxdWVyeSBmaWVsZCB3aXRoIHRoZSBjaGVja2JveCB2YWx1ZXMKICAgICovCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmllbGRIZWkubGVuZ3RoOyBpKyspIHsKICAgICAgICBpZiAoaSAhPSBmaWVsZEhlaS5sZW5ndGggLSAxKSB7CiAgICAgICAgICBxdWVyeUhlaSArPSBmaWVsZEhlaVtpXSArICcsICcKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcXVlcnlIZWkgKz0gZmllbGRIZWlbaV0KICAgICAgICB9CiAgICAgIH0KICAgICAgcXVlcnlIZWkgKz0gJyBGUk9NIG1xdHRfY29uc3VtZXIgd2hlcmUgXCJ0b3BpY1wiPVwnaGVzX2F5ZW50LXNub3cvZGV2aWNlcy9oZWknICsgJy0nICsgdGhpcy5zZWxlY3RzX2xvY2F0aW9uLnNpbXBsZSArICcvdXBcJycgKwogICAgICAgICcgQU5EIHRpbWU+bm93KCktJyArIHRoaXMuZG93bmxvYWRfdGltZV92YWx1ZSArIHRoaXMuc2VsZWN0c190aW1lLnNpbXBsZQoKCiAgICAgIC8vICAgICAgIGNvbnNvbGUubG9nKCJxdWVyeSBkbCIpCiAgICAgIC8vICAgICAgIGNvbnNvbGUubG9nKHF1ZXJ5RGwpCiAgICAgIC8vICAgICAgIGNvbnNvbGUubG9nKCJxdWVyeSBoZWkiKQogICAgICAvLyAgICAgICBjb25zb2xlLmxvZyhxdWVyeUhlaSkKCiAgICAgIC8qKgogICAgICAgKiBwcm9taXNlIHBhcnQgOiAzIHBvc3NpYmlsaXR5CiAgICAgICAqIDEuIG9uZSBxdWVyeSBmb3IgZGwKICAgICAgICogMi4gb25lIHF1ZXJ5IGZvciBoZWkKICAgICAgICogMy4gcXVlcnkgZm9yIGJvdGggLT4gMiBkaWZmZXJlbnQgcXVlcnkKICAgICAgICovCiAgICAgIGlmICh0aGlzLnNlbnNvcl9kbCA9PT0gdHJ1ZSAmJiB0aGlzLnNlbnNvcl9oZWkgIT0gdHJ1ZSkgewogICAgICAgIFByb21pc2UuYWxsKFsKICAgICAgICAgIHRoaXMuJGluZmx1eENsaWVudC5xdWVyeShxdWVyeURsKQogICAgICAgIF0pLnRoZW4ocGFyc2VkUmVzID0+IHsKICAgICAgICAgIHBhcnNlZFJlcy5tYXAoYXJyID0+IHsKICAgICAgICAgICAgaWYgKGFyclswXSAhPSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgbGV0IHZhbHVlID0gYXJyW2ldCiAgICAgICAgICAgICAgICB0aGlzLmpzb25fZGF0YS5wdXNoKHRoaXMuZXhwb3J0VG9Kc29uKHZhbHVlKSkKCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9KS5jYXRjaChlcnJvciA9PiBjb25zb2xlLmxvZyhlcnJvcikpCgogICAgICB9IGVsc2UgaWYgKHRoaXMuc2Vuc29yX2hlaSA9PT0gdHJ1ZSAmJiB0aGlzLnNlbnNvcl9kbCAhPSB0cnVlKSB7CiAgICAgICAgUHJvbWlzZS5hbGwoWwogICAgICAgICAgdGhpcy4kaW5mbHV4Q2xpZW50LnF1ZXJ5KHF1ZXJ5SGVpKQogICAgICAgIF0pLnRoZW4ocGFyc2VkUmVzID0+IHsKICAgICAgICAgIHBhcnNlZFJlcy5tYXAoYXJyID0+IHsKICAgICAgICAgICAgaWYgKGFyclswXSAhPSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgbGV0IHZhbHVlID0gYXJyW2ldCiAgICAgICAgICAgICAgICB0aGlzLmpzb25fZGF0YS5wdXNoKHRoaXMuZXhwb3J0VG9Kc29uKHZhbHVlKSkKCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9KS5jYXRjaChlcnJvciA9PiBjb25zb2xlLmxvZyhlcnJvcikpCiAgICAgIH0gZWxzZSBpZiAodGhpcy5zZW5zb3JfaGVpID09PSB0cnVlICYmIHRoaXMuc2Vuc29yX2RsID09PSB0cnVlKSB7CiAgICAgICAgbGV0IHF1ZXJ5MSA9ICdTZWxlY3QgJyArIGZpZWxkRGwgKyAnLCAnICsgZmllbGRIZWkgKyAnIEZST00gbXF0dF9jb25zdW1lciB3aGVyZSBcInRvcGljXCI9XCdoZXNfYXllbnQtc25vdy9kZXZpY2VzL2RlY2VudGxhYicgKyAnLScgKyB0aGlzLnNlbGVjdHNfbG9jYXRpb24uc2ltcGxlICsgJy91cFwnJyArCiAgICAgICAgICAnIG9yICcgKyAnXCJ0b3BpY1wiPVwnaGVzX2F5ZW50LXNub3cvZGV2aWNlcy9oZWknICsgJy0nICsgdGhpcy5zZWxlY3RzX2xvY2F0aW9uLnNpbXBsZSArICcvdXBcJycgKwogICAgICAgICAgJyBBTkQgdGltZT5ub3coKS0nICsgdGhpcy5kb3dubG9hZF90aW1lX3ZhbHVlICsgdGhpcy5zZWxlY3RzX3RpbWUuc2ltcGxlCgogICAgICAgIFByb21pc2UuYWxsKFsKICAgICAgICAgIHRoaXMuJGluZmx1eENsaWVudC5xdWVyeShxdWVyeTEpCiAgICAgICAgXSkudGhlbihwYXJzZWRSZXMgPT4gewogICAgICAgICAgcGFyc2VkUmVzLm1hcChhcnIgPT4gewogICAgICAgICAgICBpZiAoYXJyWzBdICE9IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICBsZXQgdmFsdWUgPSBhcnJbaV0KICAgICAgICAgICAgICAgIHRoaXMuanNvbl9kYXRhLnB1c2godGhpcy5leHBvcnRUb0pzb24odmFsdWUpKQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSk7CgogICAgICAgIH0pLmNhdGNoKGVycm9yID0+IGNvbnNvbGUubG9nKGVycm9yKSkKICAgICAgfQogICAgfSwKCiAgICAvKioKICAgICAqIHRvIEpzb24gYXJyYXkKICAgICAqIEBwYXJhbSBzZXJpZUNoYXJ0CiAgICAgKiBAcmV0dXJucyB7YW55fQogICAgICovCiAgICBleHBvcnRUb0pzb246IGZ1bmN0aW9uIChzZXJpZUNoYXJ0KSB7CiAgICAgIGxldCB0b0pzb25pc2VkID0gSlNPTi5zdHJpbmdpZnkoc2VyaWVDaGFydCkKICAgICAgbGV0IGpzb25pc2VkID0gSlNPTi5wYXJzZSh0b0pzb25pc2VkKQogICAgICByZXR1cm4ganNvbmlzZWQKICAgIH0sCiAgfQoKfQo="},{"version":3,"sources":["downloadData.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"downloadData.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <card>\n      <div class=\"col-lg-12\">\n        <el-collapse class=\"collapse-info\">\n          <el-collapse-item style=\"background-color: white\" title=\"Exporter les valeurs disponibles\" name=\"1\">\n            <card>\n              <div>\n                <h3>Valeurs à télécharger</h3>\n                <div class=\"row\">\n                  <div class=\"col-lg-2\">\n                    <h4>Emplacement</h4>\n                    <el-select class=\"select-default\" size=\"large\" placeholder=\"Single Select\"\n                               v-model=\"selects_location.simple\">\n                      <el-option v-for=\"option in selects_location.download_location_unit\" class=\"select-default\"\n                                 :value=\"option.value\" :label=\"option.label\" :key=\"option.label\">\n                      </el-option>\n                    </el-select>\n                  </div>\n\n                  <div class=\"col-lg-2\">\n                    <h4>Depuis</h4>\n                    <fg-input placeholder=\"Valeur de temps\" v-model=\"download_time_value\"></fg-input>\n                    <el-select class=\"select-default\" size=\"large\" placeholder=\"Single Select\"\n                               v-model=\"selects_time.simple\">\n                      <el-option v-for=\"option in selects_time.download_time_unit\" class=\"select-default\"\n                                 :value=\"option.value\" :label=\"option.label\" :key=\"option.label\">\n                      </el-option>\n                    </el-select>\n                  </div>\n                </div>\n\n                <br>\n\n                <div class=\"row\">\n                  <div class=\"col-lg-2\">\n                    <h4>Capteurs</h4>\n                  </div>\n                  <div class=\"col-lg-2\" style=\"margin-top: 35px\">\n                    <l-checkbox v-model=\"sensor_dl\">Capteur de température</l-checkbox>\n                  </div>\n                  <div class=\"col-lg-2\" style=\"margin-top: 35px\">\n                    <l-checkbox v-model=\"sensor_hei\">Capteur de hauteur de neige</l-checkbox>\n                  </div>\n                </div>\n\n                <el-collapse class=\"collapse-info\" v-if=\"this.sensor_dl==true\">\n                  <el-collapse-item style=\"background-color: white\" title=\"Capteur de température du sol et de l'air\"\n                                    name=\"1\">\n                    <br><br>\n                    <div class=\"row\" align=\"center\">\n                      <div class=\"col-lg-2\">\n                        <p>Température de l'air</p>\n                        <l-checkbox v-model=\"download_head_temp_dl\"></l-checkbox>\n                      </div>\n                      <div class=\"col-lg-2\">\n                        <p>Température du sol</p>\n                        <l-checkbox v-model=\"download_target_temp_dl\"></l-checkbox>\n                      </div>\n                      <div class=\"col-lg-2\">\n                        <p>Niveau de batterie</p>\n                        <l-checkbox v-model=\"download_battery_dl\"></l-checkbox>\n                      </div>\n                      <div class=\"col-lg-2\">\n                        <p>RSSI </p>\n                        <l-checkbox v-model=\"download_RSSI_dl\"></l-checkbox>\n                      </div>\n                      <div class=\"col-lg-2\">\n                        <p>SNR</p>\n                        <l-checkbox v-model=\"download_SNR_dl\"></l-checkbox>\n                      </div>\n                    </div>\n                    <br><br>\n                  </el-collapse-item>\n                </el-collapse>\n\n                <el-collapse class=\"collapse-info\" v-if=\"this.sensor_hei==true\">\n                  <el-collapse-item style=\"background-color: white\" title=\"Capteur de hauteur de neige et d'humidité\"\n                                    name=\"1\">\n                    <br><br>\n                    <div class=\"row\" align=\"center\">\n                      <div class=\"col-lg-2\">\n                        <p>Hauteur de neige</p>\n                        <l-checkbox v-model=\"download_snow_height_hei\"></l-checkbox>\n                      </div>\n                      <div class=\"col-lg-2\">\n                        <p>Humidité</p>\n                        <l-checkbox v-model=\"download_humidity_hei\"></l-checkbox>\n                      </div>\n                      <div class=\"col-lg-2\">\n                        <p>Niveau de batterie</p>\n                        <l-checkbox v-model=\"download_battery_hei\"></l-checkbox>\n                      </div>\n                      <div class=\"col-lg-2\">\n                        <p>RSSI </p>\n                        <l-checkbox v-model=\"download_RSSI_hei\"></l-checkbox>\n                      </div>\n                      <div class=\"col-lg-2\">\n                        <p>SNR</p>\n                        <l-checkbox v-model=\"download_SNR_hei\"></l-checkbox>\n                      </div>\n                    </div>\n                    <br><br>\n                  </el-collapse-item>\n                </el-collapse>\n\n                <br><br>\n                <div class=\"text-center\">\n                  <l-button type=\"info\" outline=\"\" align=\"center\" @click=\"loadData()\"><b>\n                    1. Valider</b></l-button>\n                  <p></p>\n\n                  <l-button type=\"info\" outline=\"\" align=\"center\" v-if=\"json_data[0]!=undefined\">\n                    <download-csv\n                      :data=\"json_data\">\n                      <b>2. Télécharger</b>\n                    </download-csv>\n                  </l-button>\n\n                </div>\n              </div>\n            </card>\n          </el-collapse-item>\n        </el-collapse>\n      </div>\n    </card>\n  </div>\n</template>\n\n<script>\nimport LCheckbox from \"@/components/Inputs/Checkbox\";\nimport downloadCsv from \"vue-json-csv\";\nimport {Collapse, CollapseItem, Option, Select} from \"element-ui\";\nimport {FormGroupInput as FgInput} from \"@/components/index\";\nimport db_req from \"@/constants/influx_requests.json\";\n\nexport default {\n  name: \"downloadData\",\n  components: {LCheckbox},\n  component: {\n    downloadCsv,\n    [Collapse.name]: Collapse,\n    [CollapseItem.name]: CollapseItem,\n    LCheckbox, FgInput,\n    [Select.name]: Select,\n    [Option.name]: Option\n  },\n  props : {\n    location : Array\n  },\n  data() {\n    return {\n\n\n      sensorState: '',                 //state of the sensors\n      sensors: [],                     //array contain all sensors basics data\n      json_data: [],                   //json array for export and download part\n\n      // Download all data decentlab\n      sensor_dl: false,\n      download_head_temp_dl: false,                  //checkbox values\n      download_target_temp_dl: false,                //\n      download_battery_dl: false,                    //\n      download_RSSI_dl: false,                       //\n      download_SNR_dl: false,                        //\n\n      //Download all data hei\n      sensor_hei: false,\n      download_snow_height_hei: false,                  //checkbox values\n      download_humidity_hei: false,                //\n      download_battery_hei: false,                    //\n      download_RSSI_hei: false,                       //\n      download_SNR_hei: false,                        //\n\n      download_time_value: '12',                  //input value\n      selects_time: {                                  //input selector\n        simple: 'h',\n        download_time_unit: [\n          {value: 'h', label: 'Heure(s)'},\n          {value: 'd', label: 'Jour(s)'},\n          {value: 'w', label: 'Semaine(s)'},\n        ]\n      },\n      selects_location: {                         //input selector\n        simple: \"\",\n        download_location_unit: [\n        ]\n      },\n\n\n    }\n  },\n  beforeMount() {\n    this.selects_location.simple = this.location[0].location\n    // set the select component with the values taken in the json file\n    for(var i = 0 ; i< this.location.length;i++){\n      this.selects_location.download_location_unit.push(\n        {\n          value : this.location[i].location, label: this.location[i].realName\n        })\n    }\n  },\n\n\n  methods: {\n    loadData: function () {\n      this.json_data = [];\n      this.json_dataDL = [];\n      this.json_dataHei = [];\n\n      let queryDl = 'SELECT '\n      let queryHei = 'SELECT '\n\n      let fieldDl = [];\n      let fieldHei = [];\n      if (this.download_target_temp_dl != false) {\n        fieldDl.push('payload_fields_temperature_target_value')\n      }\n      if (this.download_head_temp_dl != false) {\n        fieldDl.push('payload_fields_temperature_head_value')\n      }\n      if (this.download_battery_dl != false) {\n        fieldDl.push(db_req.field_battery)\n      }\n      if (this.download_RSSI_dl != false) {\n        fieldDl.push(db_req.field_rssi)\n      }\n      if (this.download_SNR_dl != false) {\n        fieldDl.push(db_req.field_snr)\n      }\n      /*\n        for loop to create the query field with the checkbox values\n      */\n      for (let i = 0; i < fieldDl.length; i++) {\n        if (i != fieldDl.length - 1) {\n          queryDl += fieldDl[i] + ', '\n        } else {\n          queryDl += fieldDl[i]\n        }\n      }\n      queryDl += ' FROM mqtt_consumer where \\\"topic\\\"=\\'hes_ayent-snow/devices/decentlab' + '-' + this.selects_location.simple + '/up\\'' +\n        ' AND time>now()-' + this.download_time_value + this.selects_time.simple\n\n      if (this.download_snow_height_hei != false) {\n        fieldHei.push('payload_fields_WaterHeightMm')\n      }\n      if (this.download_humidity_hei != false) {\n        fieldHei.push('payload_fields_HumiditySHT30')\n      }\n      if (this.download_battery_hei != false) {\n        fieldHei.push(\"payload_fields_BatteryV\")\n      }\n      if (this.download_RSSI_hei != false) {\n        fieldHei.push(db_req.field_rssi)\n      }\n      if (this.download_SNR_hei != false) {\n        fieldHei.push(db_req.field_snr)\n      }\n      /*\n      for loop to create the query field with the checkbox values\n    */\n      for (let i = 0; i < fieldHei.length; i++) {\n        if (i != fieldHei.length - 1) {\n          queryHei += fieldHei[i] + ', '\n        } else {\n          queryHei += fieldHei[i]\n        }\n      }\n      queryHei += ' FROM mqtt_consumer where \\\"topic\\\"=\\'hes_ayent-snow/devices/hei' + '-' + this.selects_location.simple + '/up\\'' +\n        ' AND time>now()-' + this.download_time_value + this.selects_time.simple\n\n\n      //       console.log(\"query dl\")\n      //       console.log(queryDl)\n      //       console.log(\"query hei\")\n      //       console.log(queryHei)\n\n      /**\n       * promise part : 3 possibility\n       * 1. one query for dl\n       * 2. one query for hei\n       * 3. query for both -> 2 different query\n       */\n      if (this.sensor_dl === true && this.sensor_hei != true) {\n        Promise.all([\n          this.$influxClient.query(queryDl)\n        ]).then(parsedRes => {\n          parsedRes.map(arr => {\n            if (arr[0] != undefined) {\n              for (let i = 0; i < arr.length; i++) {\n                let value = arr[i]\n                this.json_data.push(this.exportToJson(value))\n\n              }\n            }\n          });\n        }).catch(error => console.log(error))\n\n      } else if (this.sensor_hei === true && this.sensor_dl != true) {\n        Promise.all([\n          this.$influxClient.query(queryHei)\n        ]).then(parsedRes => {\n          parsedRes.map(arr => {\n            if (arr[0] != undefined) {\n              for (let i = 0; i < arr.length; i++) {\n                let value = arr[i]\n                this.json_data.push(this.exportToJson(value))\n\n              }\n            }\n          });\n        }).catch(error => console.log(error))\n      } else if (this.sensor_hei === true && this.sensor_dl === true) {\n        let query1 = 'Select ' + fieldDl + ', ' + fieldHei + ' FROM mqtt_consumer where \\\"topic\\\"=\\'hes_ayent-snow/devices/decentlab' + '-' + this.selects_location.simple + '/up\\'' +\n          ' or ' + '\\\"topic\\\"=\\'hes_ayent-snow/devices/hei' + '-' + this.selects_location.simple + '/up\\'' +\n          ' AND time>now()-' + this.download_time_value + this.selects_time.simple\n\n        Promise.all([\n          this.$influxClient.query(query1)\n        ]).then(parsedRes => {\n          parsedRes.map(arr => {\n            if (arr[0] != undefined) {\n              for (let i = 0; i < arr.length; i++) {\n                let value = arr[i]\n                this.json_data.push(this.exportToJson(value))\n              }\n            }\n          });\n\n        }).catch(error => console.log(error))\n      }\n    },\n\n    /**\n     * to Json array\n     * @param serieChart\n     * @returns {any}\n     */\n    exportToJson: function (serieChart) {\n      let toJsonised = JSON.stringify(serieChart)\n      let jsonised = JSON.parse(toJsonised)\n      return jsonised\n    },\n  }\n\n}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}